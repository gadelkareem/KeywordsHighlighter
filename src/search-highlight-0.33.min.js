/**
 * SearchHighlight plugin for jQuery
 *
 * Thanks to Scott Yang <http://scott.yang.id.au/>
 * for the original idea and some code
 *
 * @author Renato Formato <renatoformato@virgilio.it>
 *
 * @version 0.33
 *
 */
!function(e){jQuery.fn.SearchHighlight=function(i){var n=i.debug_referrer||document.referrer;if(!n&&void 0==i.keys)return this;t.options=e.extend({exact:"exact",style_name:"hilite",style_name_suffix:!0},i),i.engines&&t.engines.unshift(i.engines);var c=void 0!=i.keys?i.keys.toLowerCase().split(/[\s,\+\.]+/):t.decodeURL(n,t.engines);return c&&c.join("")?(t.buildReplaceTools(c),this.each(function(){var i=this;i==document&&(i=e("body")[0]),t.hiliteElement(i,c)})):this};var t={options:{},regex:[],engines:[[/^http:\/\/(www\.)?google\./i,/q=([^&]+)/i],[/^http:\/\/(www\.)?search\.yahoo\./i,/p=([^&]+)/i],[/^http:\/\/(www\.)?search\.msn\./i,/q=([^&]+)/i],[/^http:\/\/(www\.)?search\.live\./i,/query=([^&]+)/i],[/^http:\/\/(www\.)?search\.aol\./i,/userQuery=([^&]+)/i],[/^http:\/\/(www\.)?ask\.com/i,/q=([^&]+)/i],[/^http:\/\/(www\.)?altavista\./i,/q=([^&]+)/i],[/^http:\/\/(www\.)?feedster\./i,/q=([^&]+)/i],[/^http:\/\/(www\.)?search\.lycos\./i,/q=([^&]+)/i],[/^http:\/\/(www\.)?alltheweb\./i,/q=([^&]+)/i],[/^http:\/\/(www\.)?technorati\.com/i,/([^\?\/]+)(?:\?.*)$/i]],subs:{},decodeURL:function(t,i){t=decodeURIComponent(t);var n=null;return e.each(i,function(e,i){if(i[0].test(t)){var c=t.match(i[1]);if(c)return n=c[1].toLowerCase(),!1}}),n&&(n=n.replace(/(\'|")/,"$1"),n=n.split(/[\s,\+\.]+/)),n},regexAccent:[[/[\xC0-\xC5\u0100-\u0105]/gi,"a"],[/[\xC7\u0106-\u010D]/gi,"c"],[/[\xC8-\xCB]/gi,"e"],[/[\xCC-\xCF]/gi,"i"],[/\xD1/gi,"n"],[/[\xD2-\xD6\xD8]/gi,"o"],[/[\u015A-\u0161]/gi,"s"],[/[\u0162-\u0167]/gi,"t"],[/[\xD9-\xDC]/gi,"u"],[/\xFF/gi,"y"],[/[\x91\x92\u2018\u2019]/gi,"'"]],matchAccent:/[\x91\x92\xC0-\xC5\xC7-\xCF\xD1-\xD6\xD8-\xDC\xFF\u0100-\u010D\u015A-\u0167\u2018\u2019]/gi,replaceAccent:function(e){if(t.matchAccent.lastIndex=0,t.matchAccent.test(e))for(var i=0,n=t.regexAccent.length;n>i;i++)e=e.replace(t.regexAccent[i][0],t.regexAccent[i][1]);return e},escapeRegEx:/((?:\\{2})*)([[\]{}*?|])/g,buildReplaceTools:function(i){var n,c=[];switch(e.each(i,function(e,i){(i=t.replaceAccent(i).replace(t.escapeRegEx,"$1\\$2"))&&c.push(i)}),n=c.join("|"),t.options.exact){case"exact":n="\\b(?:"+n+")\\b";break;case"whole":n="\\b\\w*("+n+")\\w*\\b"}t.regex=new RegExp(n,"gi"),e.each(c,function(e,i){t.subs[i]=t.options.style_name+(t.options.style_name_suffix?e+1:"")})},nosearch:/s(?:cript|tyle)|textarea/i,hiliteElement:function(i,n){var c,s,r=t.options;c=e(r.highlight?r.highlight:"body"),c.length||(c=e("body")),s=e(r.nohighlight?r.nohighlight:[]),c.each(function(){t.hiliteTree(this,n,s)})},hiliteTree:function(i,n,c){if(-1==c.index(i))for(var s="whole"==t.options.exact?1:0,r=0,o=i.childNodes.length;o>r;r++){var a=i.childNodes[r];if(8!=a.nodeType)if(3==a.nodeType){var h,l=a.data,u=t.replaceAccent(l),x="",g=0;for(t.regex.lastIndex=0;h=t.regex.exec(u);)x+=l.substr(g,h.index-g)+'<span class="'+t.subs[h[s].toLowerCase()]+'">'+l.substr(h.index,h[0].length)+"</span>",g=h.index+h[0].length;if(x){x+=l.substring(g);var w=e.merge([],e("<span>"+x+"</span>")[0].childNodes);o+=w.length-1,r+=w.length-1,e(a).before(w).remove()}}else 1==a.nodeType&&-1==a.nodeName.search(t.nosearch)&&t.hiliteTree(a,n,c)}}}}(jQuery);


